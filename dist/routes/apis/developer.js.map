{"version":3,"sources":["../../../routes/apis/developer.js"],"names":["Developer","require","model","Application","express","router","Router","get","req","res","find","err","developers","send","json","findById","params","did","developer","populate","exec","then","applications","catch","status","post","d","username","body","save","application","name","findByIdAndUpdate","a","id","put","delete","remove","_id","module","exports"],"mappings":"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","file":"developer.js","sourcesContent":["const Developer = require('../../models/developer').model;\nconst Application = require('../../models/application').model;\n\n\nvar express = require('express');\nvar router = express.Router();\n\nrouter.get('/', (req, res) => {\n    Developer.find((err, developers) => {\n        if (err) res.send(err);\n        else res.json(developers)\n    });\n});\n\nrouter.get('/:did', (req, res) => {\n    Developer.findById(req.params.did,\n        (err, developer) =>{\n        if (err) res.send(err);\n        else res.json(developer);\n        });\n});\n\nrouter.get('/:did/application', (req, res) => {\n    Developer.findById(req.params.did)\n        .populate('applications')\n        .exec()\n        .then(developer => res.json(developer.applications))\n        .catch(err => res.status(503).send(err))\n});\n\n\nrouter.post('/', (req, res) => {\n    const d = new Developer({username: req.body.username});\n    d.save((err, developer) => {\n        if (err) res.send(err);\n        else res.json(developer)\n    });\n});\n\nrouter.post('/:did/application', (req, res) => {\n    const application = new Application({name: req.body.name});\n    application.save()\n        .then(a => Developer.findByIdAndUpdate(\n            req.params.did,\n            {'$push': {applications: a.id}},\n            {'new': true})\n            .exec()\n            .then(() => res.json(a)))\n        .catch(err => res.status(503).send(err));\n});\n\nrouter.put('/:did', (req, res) => {\n    Developer.findByIdAndUpdate(req.params.did, (err, developer) => {\n        if (err) res.send(err);\n        else {\n            developer.username = req.body.username;\n            developer.save((err, d) => {\n                if (err) res.send(err);\n                else res.json(d);\n            })\n        }\n    })\n});\n\nrouter.delete('/:did', (req, res) => {\n    Developer.remove({_id: req.params.did}, (err, developer) => {\n        if (err) res.send(err);\n        else res.status(204).send();\n    })\n});\n\nmodule.exports = router;\n"]}